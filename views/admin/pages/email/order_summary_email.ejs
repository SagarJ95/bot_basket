<div style="max-width: 700px; margin: auto; font-family: 'Segoe UI', sans-serif; line-height: 1.6; color: #333; background: #fff; border: 1px solid #eaeaea; border-radius: 8px; padding: 30px;">
  <div style="border-bottom: 3px solid #4CAF50; padding-bottom: 10px; margin-bottom: 20px;">
    <h2 style="color: #4CAF50; margin: 0;">Hello <%= customer_name %>,</h2>
    <p style="margin: 10px 0 0; font-size: 16px;"><%= titleEmail %></p>
  </div>

  <% if(status == 5 && cancel_reason != '' && cancel_reason != null){ %>
    <div style="background-color: #ffe6e6; padding: 15px; border-left: 5px solid red; margin-bottom: 20px;">
      <p style="margin: 0; color: #d8000c;"><strong>Cancel Reason:</strong> <%= cancel_reason %></p>
    </div>
  <% } %>

  <div style="margin-bottom: 25px;">
    <h3 style="margin-bottom: 10px;">ðŸ§¾ Order Summary</h3>
    <p><strong>Order ID:</strong> <%= orderId %></p>
    <p><strong>Date of Purchase:</strong> <%= orderDate %></p>
    <p><strong>Payment Method:</strong> <%= payment_mode %></p>
    <p><strong>Payment Status:</strong> <%= payment_status %></p>
  </div>

  <div style="margin-bottom: 25px;">
    <h3 style="margin-bottom: 10px;">ðŸ“¦ Shipping Address</h3>
    <% if (delivery_address && delivery_address.length > 0) { %>
      <p><%= delivery_address[0].address %></p>
      <p><%= delivery_address[0].city %>, <%= delivery_address[0].state %></p>
      <p><%= delivery_address[0].zip_code %>, <%= delivery_address[0].country %></p>
    <% } %>
  </div>

  <div style="margin-bottom: 25px;">
    <h3 style="margin-bottom: 10px;">ðŸ›’ Product Details</h3>
    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
      <thead>
        <tr style="background-color: #f5f5f5;">
          <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Product Name</th>
          <th style="padding: 12px; border: 1px solid #ddd; text-align: center;">Quantity</th>
          <th style="padding: 12px; border: 1px solid #ddd; text-align: right;">Price</th>
          <th style="padding: 12px; border: 1px solid #ddd; text-align: center;">Status</th>
          <th style="padding: 12px; border: 1px solid #ddd; text-align: center;">Reason</th>
        </tr>
      </thead>
      <tbody>
        <% let totalAmount = 0; %>
        <% products.forEach(function(product) { %>
          <% if (product.delivery_status !== 'Reject') { totalAmount += product.price * product.quantity; } %>
        <tr>
          <td style="padding: 12px; border: 1px solid #ddd;"><%= product.product_name %></td>
          <td style="padding: 12px; border: 1px solid #ddd; text-align: center;"><%= product.quantity %></td>
          <td style="padding: 12px; border: 1px solid #ddd; text-align: right;">â‚¹<%= product.price %></td>
          <td style="padding: 12px; border: 1px solid #ddd; text-align: center;"><%= product.delivery_status %></td>
          <td style="padding: 12px; border: 1px solid #ddd; text-align: center;"><%= product.reason || '-' %></td>
        </tr>
        <% }); %>
        <tr>
          <td colspan="2"></td>
          <td colspan="3" style="border: 1px solid #ddd; padding: 10px; text-align: right; background: #f0f8f5;">
            <strong>Total: â‚¹<%= totalAmount.toFixed(2) %></strong>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <p style="font-size: 16px; margin-top: 30px;">Thank you for shopping with us. If you have any questions, feel free to reply to this emailâ€”we're here to help!</p>
  <p style="margin-top: 20px;">Warm regards,<br/><strong>Team BotBasket</strong></p>

  <hr style="margin: 40px 0; border: none; border-top: 1px solid #eee;" />
  <p style="font-size: 12px; color: #999; text-align: center;">This is an automated message. Please do not reply to this email.</p>
</div>
