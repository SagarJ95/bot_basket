<%- pageCSS = `
<link href="/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css"/>
` %>

<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
    <div id="kt_app_toolbar_container" class="app-container container-fluid d-flex flex-stack">
        <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
            <h1 class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0">Plans</h1>
            <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                <li class="breadcrumb-item text-muted">
                    <a href="/admin/dashboard" class="text-muted text-hover-primary">Home</a>
                </li>
                <li class="breadcrumb-item">
                    <span class="bullet bg-gray-500 w-5px h-2px"></span>
                </li>
                <li class="breadcrumb-item text-muted">Plans</li>
            </ul>
        </div>
        <div class="d-flex align-items-center gap-2 gap-lg-3">
            <!-- <a href="javascript:void(0);" class="btn btn-sm fw-bold btn-secondary">Filter</a> -->
            <a href="/admin/plans-list" class="btn btn-sm fw-bold btn-primary">Back to listing</a>
        </div>
    </div>
</div>

<div id="kt_app_content" class="app-content flex-column-fluid">
    <div id="kt_app_content_container" class="app-container container-fluid">
        <div class="card card-flush">
            <div class="card-body">
                <form id="data_form" class="form">
                    <input type="hidden" id="plan_id" value="<%= plan_data.id || '' %>" name="plan_id">
                    <div class="row fv-row">
                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Plan Name</span></label>
                            <input type="text" class="form-control" placeholder="Enter plan name" name="plan_name" value="<%= plan_data.plan_name || '' %>" />
                        </div>

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Cost</span></label>
                            <input class="form-control" placeholder="Enter course cost" name="cost" value="<%= plan_data.cost || '' %>" />
                        </div>

                         <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Plan Type</span></label>
                            <select class="form-control" id="plan_type" name="plan_type">
                                <option value="">Select</option>
                                <option value="Monthly" <%= plan_data.plan_type === 'Monthly' ? 'selected' : '' %>>Monthly</option>
                                <option value="Yearly" <%= plan_data.plan_type === 'Yearly' ? 'selected' : '' %>>Yearly</option>
                            </select>
                        </div> 

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Plan Duration</span></label>
                            <input class="form-control" placeholder="Enter Duration" name="plan_duration" value="<%= plan_data.plan_duration || '' %>" />
                        </div>

                       

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Devices can watch at a time?</span></label>
                            <input type="number" class="form-control" placeholder="Devices can watch?" name="simaltaneous_devices_accessible" value="<%= plan_data.simaltaneous_devices_accessible || '' %>" />
                        </div>

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Download Devices</span></label>

                            <select class="form-control" name="download_devices">
                                <option value="">Select</option>
                                <option value="Yes" <%= plan_data.download_devices === 'Yes' ? 'selected' : '' %>>Yes</option>
                                <option value="No" <%= plan_data.download_devices === 'No' ? 'selected' : '' %>>No</option>
                            </select>
                        </div>

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Courses</span></label>
                            <select class="form-select" name="courses[]" id="courses" multiple data-control="select2" data-close-on-select="false" data-placeholder="Select an option" data-allow-clear="true">
                                <option value="">Select</option>
                                <option value="All" <%= plan_data.courses && plan_data.courses.includes('All') ? 'selected' : '' %>>All</option>
                                <% courses_data.forEach(crs => { %>
                                    <option value="<%= crs.id %>" <%= plan_data.courses && plan_data.courses.includes(crs.id) ? 'selected' : '' %>><%= crs.name %></option>
                                <% }) %>
                            </select>
                        </div>

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Access of craftschool session</span></label>
                            <select class="form-control" name="craftschool_sessions">
                                <option value="">Select</option>
                                <option value="Yes" <%= plan_data.craftschool_sessions === 'Yes' ? 'selected' : '' %>>Yes</option>
                                <option value="No" <%= plan_data.craftschool_sessions === 'No' ? 'selected' : '' %>>No</option>
                            </select>
                        </div>



                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2"><span class="required">Community Access?</span></label>
                            <select class="form-control" name="community_access">
                                <option value="">Select</option>
                                <option value="Yes" <%= plan_data.community_access === 'Yes' ? 'selected' : '' %>>Yes</option>
                                <option value="No" <%= plan_data.community_access === 'No' ? 'selected' : '' %>>No</option>
                            </select>
                        </div>

                        <div class="col-4 mt-5">
                            <label class="fs-6 fw-semibold form-label mb-2">
                                <span class="required">Supported Devices</span>
                            </label>
                            <div class="row ps-3">
                                <% plan_devices.forEach(dev => { %>
                                    <div class="form-check col-4 mt-5">
                                        <input type="checkbox" class="form-check-input" name="supported_devices[]" value="<%= dev.id %>" id="<%= dev.device_name %>" <%= plan_data.supported_devices && plan_data.supported_devices.includes(dev.id) ? 'checked' : '' %>>
                                        <label class="form-check-label" for="<%= dev.device_name %>"><%= dev.device_name %></label>
                                    </div>
                                <% }); %>
                            </div>
                        </div>
                    </div>

                    <div class="text-end pt-15">
                        <button type="submit" class="btn btn-sm btn-primary" id="form_save_button">Save</button>
                        <!-- <button type="button" id="form_save_button" class="btn btn-sm btn-primary">
                            <span class="indicator-label">Submit</span>
                            <span class="indicator-progress">Please wait...
                            <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                        </button> -->
                        <a href="/admin/plans-list" class="btn btn-sm btn-secondary">Back</a>
                    </div>
                </form>


            </div>
        </div>
    </div>
</div>

<%- pageJs = `
<script src="/plugins/custom/datatables/datatables.bundle.js"></script>
<script src="/js/pages/plan.js"></script>
` %>
